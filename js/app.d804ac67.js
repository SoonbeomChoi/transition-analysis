(function(t){function e(e){for(var a,s,o=e[0],c=e[1],u=e[2],d=0,m=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(m.length)m.shift()();return r.push.apply(r,u||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],a=!0,o=1;o<i.length;o++){var c=i[o];0!==n[c]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var a={},n={app:0},r=[];function s(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=a,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/transition-analysis/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"h-100",attrs:{id:"app"}},[t.isLoading?t._e():i("div",{staticClass:"container-fluid"},[i("h2",{staticClass:"text-center mt-2"},[t._v("DJ Mix Transition Analysis")]),i("div",{staticClass:"row border-bottom"}),t._l(t.mixTypes,(function(t){return i("Panel",{key:t.key,attrs:{"mix-type":t}})})),i("div",{staticClass:"row align-items-center mt-1"},[i("div",{staticClass:"col-sm-auto"},[i("span",{staticClass:"btn p-0",on:{click:t.prevExample}},[i("svg",{staticClass:"bi bi-skip-start",attrs:{width:"2em",height:"2em",viewBox:"0 0 16 16",fill:"white",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M4.5 3.5A.5.5 0 0 0 4 4v8a.5.5 0 0 0 1 0V4a.5.5 0 0 0-.5-.5z"}}),i("path",{attrs:{"fill-rule":"evenodd",d:"M5.696 8L11.5 4.633v6.734L5.696 8zm-.792-.696a.802.802 0 0 0 0 1.392l6.363 3.692c.52.302 1.233-.043 1.233-.696V4.308c0-.653-.713-.998-1.233-.696L4.904 7.304z"}})])]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isPlaying,expression:"isPlaying"}],staticClass:"btn p-0",on:{click:t.pauseAll}},[i("svg",{staticClass:"bi bi-pause",attrs:{width:"3em",height:"3em",viewBox:"0 0 16 16",fill:"white",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M6 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zm4 0a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5z"}})])]),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isPlaying,expression:"!isPlaying"}],staticClass:"btn p-0",on:{click:t.playAll}},[i("svg",{staticClass:"bi bi-play",attrs:{width:"3em",height:"3em",viewBox:"0 0 16 16",fill:"white",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M10.804 8L5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"}})])]),i("span",{staticClass:"btn p-0",on:{click:t.nextExample}},[i("svg",{staticClass:"bi bi-skip-end",attrs:{width:"2em",height:"2em",viewBox:"0 0 16 16",fill:"white",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M12 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5z"}}),i("path",{attrs:{"fill-rule":"evenodd",d:"M10.804 8L5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"}})])])]),i("div",{staticClass:"col-sm-auto"},[i("div",{staticClass:"btn-group",attrs:{role:"group"}},t._l(t.examples,(function(e,a){return i("button",{key:a,staticClass:"btn",class:{"btn-primary":t.currentExample===e,"btn-secondary":t.currentExample!==e},attrs:{value:a,type:"button"},on:{click:function(e){return t.changeExample(a)}}},[t._v(" "+t._s(a)+" ")])})),0)]),i("div",{staticClass:"col"}),i("div",{staticClass:"col-sm-auto"},[i("div",{staticClass:"btn-group",attrs:{role:"group"}},t._l(t.mixTypes,(function(e){return i("button",{key:e.key,staticClass:"btn",class:{"btn-primary":t.currentMixType===e.key,"btn-secondary":t.currentMixType!==e.key},attrs:{value:e.key,type:"button"},on:{click:t.changeMixType}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-6"}),i("div",{staticClass:"col-6 p-0 mt-2"},[t._m(0),i("div",{staticClass:"row"},[i("div",{staticClass:"col-6"},[i("dl",{staticClass:"row"},[t._m(1),i("dd",{staticClass:"col-sm-10 p-0"},[t._v(" Solo Previous Track and mute others ")]),t._m(2),i("dd",{staticClass:"col-sm-10 p-0"},[t._v(" Solo Mix and mute others ")]),t._m(3),i("dd",{staticClass:"col-sm-10 p-0"},[t._v(" Solo Next Track and mute others ")]),i("dt",{staticClass:"col-sm-2 text-center p-0"},[i("span",{staticClass:"border border-primary rounded bg-primary"},[i("svg",{staticClass:"bi bi-caret-right-fill",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M12.14 8.753l-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"}})])])]),i("dd",{staticClass:"col-sm-10 p-0"},[t._v(" Seek forward 4 seconds ")]),i("dt",{staticClass:"col-sm-2 text-center p-0"},[i("span",{staticClass:"border border-primary rounded bg-primary"},[i("svg",{staticClass:"bi bi-caret-left-fill",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M3.86 8.753l5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z"}})])])]),i("dd",{staticClass:"col-sm-10 p-0"},[t._v(" Seek backward 4 seconds ")])])]),i("div",{staticClass:"col-6"},[i("dl",{staticClass:"row"},[t._m(4),i("dd",{staticClass:"col-sm-10 p-0"},[t._v(" Select DJ Mix ")]),t._m(5),i("dd",{staticClass:"col-sm-10 p-0"},[t._v(" Select Baseline ")]),t._m(6),i("dd",{staticClass:"col-sm-10 p-0"},[t._v(" Select Crossfader ")]),t._m(7),i("dd",{staticClass:"col-sm-10 p-0"},[t._v(" Select EQ3 ")]),i("dt",{staticClass:"col-sm-2 text-center p-0"},[i("span",{staticClass:"border border-primary rounded bg-primary"},[i("svg",{staticClass:"bi bi-caret-up-fill",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M7.247 4.86l-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"}})])])]),i("dd",{staticClass:"col-sm-10 p-0"},[t._v(" Previous Example ")]),i("dt",{staticClass:"col-sm-2 text-center p-0"},[i("span",{staticClass:"border border-primary rounded bg-primary"},[i("svg",{staticClass:"bi bi-caret-down-fill",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"}})])])]),i("dd",{staticClass:"col-sm-10 p-0"},[t._v(" Next Example ")])])])])])])],2),t.isLoading?i("div",{staticClass:"d-flex h-100 justify-content-center align-content-center"},[i("div",{staticClass:"align-self-center row"},[t._m(8),i("div",{staticClass:"w-100 text-center mt-4"},[i("h2",[t._v(t._s(Math.round(t.numLoadedItems/t.totalLoadingItems*100)||0)+"%")])])])]):t._e()])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("h4",[t._v("Keyboard Shortcuts")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dt",{staticClass:"col-sm-2 text-center p-0"},[i("span",{staticClass:"border border-primary rounded bg-primary px-1"},[t._v("1")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dt",{staticClass:"col-sm-2 text-center p-0"},[i("span",{staticClass:"border border-primary rounded bg-primary px-1"},[t._v("2")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dt",{staticClass:"col-sm-2 text-center p-0"},[i("span",{staticClass:"border border-primary rounded bg-primary px-1"},[t._v("3")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dt",{staticClass:"col-sm-2 text-center p-0"},[i("span",{staticClass:"border border-primary rounded bg-primary px-1"},[t._v("Q")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dt",{staticClass:"col-sm-2 text-center p-0"},[i("span",{staticClass:"border border-primary rounded bg-primary px-1"},[t._v("W")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dt",{staticClass:"col-sm-2 text-center p-0"},[i("span",{staticClass:"border border-primary rounded bg-primary px-1"},[t._v("E")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dt",{staticClass:"col-sm-2 text-center p-0"},[i("span",{staticClass:"border border-primary rounded bg-primary px-1"},[t._v("R")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w-100 text-center"},[i("div",{staticClass:"spinner-border",staticStyle:{width:"10rem",height:"10rem"},attrs:{role:"status"}},[i("span",{staticClass:"sr-only"},[t._v("Loading...")])])])}],s=i("5530"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowing,expression:"isShowing"}]},t._l(t.audioTypes,(function(e){return i("div",{key:""+e.key,staticClass:"row"},[i("TrackRow",{staticClass:"col p-0 border-bottom border-bottom",attrs:{"mix-type":t.mixType,"audio-type":e}})],1)})),0)},c=[],u=i("2f62"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row m-0"},[i("div",{staticClass:"col p-0"},[i("Spectrogram",{staticStyle:{height:"200px"},attrs:{"mix-type":t.mixType,"audio-type":t.audioType}})],1),i("div",{staticClass:"col-sm-auto pt-1",staticStyle:{width:"160px"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col px-2"},[i("h6",{staticClass:"p-0 pt-1 mb-0 d-inline-block"},[t._v(t._s(t.audioType.name))])]),i("div",{staticClass:"p-0 mr-1 col-sm-auto btn-group-toggle",attrs:{"data-toggle":"buttons"}},[i("label",{staticClass:"btn py0 px-2 py-0 font-weight-bold",class:{"btn-primary":t.currentSoloAudioType===t.audioType.key,"btn-secondary":t.currentSoloAudioType!==t.audioType.key}},[i("input",{attrs:{type:"radio",name:"solo",autocomplete:"off"},domProps:{value:t.audioType.key},on:{click:t.solo}}),t._v(" S ")])])]),i("div",{staticClass:"row-cols-1 pt-2 align-items-center"},t._l(this.knobs,(function(e){return i("div",{key:e.gainIndex,staticClass:"col pb-1"},[i("div",{staticClass:"row justify-content-center"},[i("div",{staticClass:"col-6 p-0"},[i("div",{staticClass:"row w-100 h-100 m-0 align-items-center"},[i("small",{staticClass:"font-weight-bold col m-0 pr-2 text-right"},[t._v(t._s(e.name))])])]),i("div",{staticClass:"col p-0"},[i("Knob",{staticStyle:{width:"45px",height:"45px"},attrs:{color:e.color,curve:e.curve}})],1)])])})),0)])])},d=[],m=i("b85c"),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{position:"relative"}},[i("div",{staticClass:"canvas-container",staticStyle:{"z-index":"0"}},[i("canvas",{ref:"spec",staticClass:"w-100 h-100"})]),i("div",{staticClass:"canvas-container",staticStyle:{"z-index":"1"}},[i("canvas",{ref:"curves",staticClass:"w-100 h-100"})]),i("div",{staticClass:"canvas-container",staticStyle:{"z-index":"2"}},[i("canvas",{ref:"bar",staticClass:"w-100 h-100"})])])},p=[],f=(i("a630"),i("fb6a"),i("d3b7"),i("3ca3"),i("ddb0"),i("3835")),v=i("595c"),y=i.n(v),x={name:"Spectrogram",props:["mixType","audioType"],computed:Object(s["a"])({audio:function(){return this.$store.state.currentExample.mixes[this.mixType.key].audios[this.audioType.key]},audioDuration:function(){return this.audio.audioBuffer.duration},curves:function(){return this.audio.curves},isShowing:function(){return this.currentMixType===this.mixType.key}},Object(u["b"])(["audioCtx","isLoading","isPlaying","currentExampleIndex","currentMixType","currentSoloAudioType","startedTime","offsetTime"])),watch:{startedTime:function(){this.animate()},offsetTime:function(){this.drawBar()},isPlaying:function(){},isShowing:function(){this.isShowing&&(this.drawCurves(),this.drawBar())}},methods:{drawSpec:function(){var t=this;return new Promise((function(e){var i=t.audio.specImageUrl,a=new Image;a.onload=function(){var i=y()({colormap:"electric",nshades:256,format:"rgb"}),n=t.$refs.spec,r=n.getContext("2d");n.width=a.width,n.height=a.height,r.drawImage(a,0,0);for(var s=r.getImageData(0,0,a.width,a.height),o=0;o<s.data.length;o+=4){var c=Object(f["a"])(i[s.data[o]],3),u=c[0],l=c[1],d=c[2];s.data[o+0]=u,s.data[o+1]=l,s.data[o+2]=d,s.data[o+3]=u+l+d>4?255:0}r.putImageData(s,0,0),e()},a.src=i}))},drawCurves:function(){if(void 0!==this.curves){var t=1.5,e=1.5*t,i=15,a=this.curves,n=this.$refs.curves,r=n.getContext("2d"),s=n.getBoundingClientRect(),o=n.width=a.length*t,c=n.height=o*(s.height/s.width);r.lineWidth=e;var u,l=a[0].length,d=Array.from(Array(l).keys());u="prev"===this.audioType.key?d.slice(0,l/2):"next"===this.audioType.key?d.slice(l/2,l):d;var h,p=u.length>2?["red","yellow","lime","cyan","blue","magenta"]:["yellow","lime"],f=Object(m["a"])(u);try{for(f.s();!(h=f.n()).done;){var v=h.value;r.beginPath(),r.strokeStyle=p[v],r.moveTo(0,i+(1-a[0][v])*(c-2*i));for(var y=0;y<a.length;y++){var x=a[y][v];r.lineTo(y/a.length*o,i+(1-x)*(c-2*i))}r.stroke()}}catch(g){f.e(g)}finally{f.f()}}},animate:function(){this.drawBar(),this.isPlaying&&requestAnimationFrame(this.animate)},drawBar:function(t){if(!this.isLoading){var e,i=this.$refs.bar,a=i.getContext("2d"),n=i.getBoundingClientRect(),r=i.width=n.width,s=i.height=i.width*(n.height/n.width);if(void 0!==t)e=t;else{var o=this.isPlaying?this.audioCtx.currentTime-this.startedTime:0;e=(o+this.offsetTime)/this.audioDuration*r}a.strokeStyle="white",a.lineWidth=1.5,a.clearRect(0,0,r,s),a.beginPath(),a.moveTo(e,0),a.lineTo(e,s),a.stroke()}}},created:function(){},mounted:function(){var t=this;"dj"!==this.mixType.key&&this.drawCurves(),this.drawSpec().then((function(){t.drawBar(0),t.$refs.bar.addEventListener("mousedown",(function(e){var i=t.$refs.bar.getBoundingClientRect(),a=t.audioDuration*e.offsetX/i.width;t.$store.commit("seek",{offsetTime:a}),t.drawBar()}))}))},destroyed:function(){}},g=x,w=(i("5c1b"),i("2877")),b=Object(w["a"])(g,h,p,!1,null,"628fa57d",null),T=b.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("canvas",{ref:"canvas",staticClass:"w-100 h-100"})])},S=[],k=(i("cb29"),{name:"Knob",props:["color","curve"],computed:Object(u["b"])(["startedTime","offsetTime","isPlaying","audioCtx","duration"]),watch:{startedTime:function(){this.animate()},offsetTime:function(){this.draw()}},methods:{animate:function(){this.draw(),this.isPlaying&&requestAnimationFrame(this.animate)},draw:function(){var t=this.isPlaying?this.audioCtx.currentTime-this.startedTime:0,e=Math.min(Math.floor((t+this.offsetTime)/this.duration*this.curve.length),this.curve.length-1),i=this.curve[e],a=this.$refs.canvas,n=a.width=100,r=a.height=100,s=.2,o=(.5+s)*Math.PI,c=(.5-s)*Math.PI,u=n/2,l=r/2,d=a.getContext("2d"),m=d.lineWidth=8,h=n/2-m;d.strokeStyle="#6c757d",d.beginPath(),d.arc(u,l,h,o,c),d.stroke();var p=(.5+s+2*i*(1-s))*Math.PI;d.strokeStyle=this.color,d.beginPath(),d.arc(u,l,h,o,p),d.stroke();var f=u+Math.cos(p)*h,v=l+Math.sin(p)*h;d.strokeStyle="#6c757d",d.lineWidth=1.5*m,d.lineCap="round",d.beginPath(),d.moveTo(u,l),d.lineTo(f,v),d.stroke(),d.fillStyle=this.color,d.beginPath(),d.arc(u,l+h-4,1*m,0,2*Math.PI),d.fill()}},mounted:function(){this.draw()}}),_=k,E=Object(w["a"])(_,C,S,!1,null,"4af3cd54",null),A=E.exports,P={name:"TrackRow",components:{Knob:A,Spectrogram:T},props:["mixType","audioType"],data:function(){return{audioSource:void 0,gainNode:void 0,isAudioSourceStarted:!1}},computed:Object(s["a"])({audio:function(){return this.$store.state.currentExample.mixes[this.mixType.key].audios[this.audioType.key]},audioBuffer:function(){return this.audio.audioBuffer},curves:function(){return this.audio.curves},knobs:function(){if(!this.curves||"dj"===this.mixType.key||"mix"===this.audioType.key)return[];for(var t="eq3"===this.mixType.key?[{name:"High",curve:[],gainIndex:"prev"===this.audioType.key?2:5},{name:"Mid",curve:[],gainIndex:"prev"===this.audioType.key?1:4},{name:"Low",curve:[],gainIndex:"prev"===this.audioType.key?0:3}]:[{name:"Volume",curve:[],gainIndex:"prev"===this.audioType.key?0:1}],e="eq3"===this.mixType.key?["red","yellow","lime","cyan","blue","magenta"]:["yellow","lime"],i=0,a=t;i<a.length;i++){var n=a[i];n.color=e[n.gainIndex]}var r,s=Object(m["a"])(this.curves);try{for(s.s();!(r=s.n()).done;){var o,c=r.value,u=Object(m["a"])(t);try{for(u.s();!(o=u.n()).done;){var l=o.value;l.curve.push(c[l.gainIndex])}}catch(d){u.e(d)}finally{u.f()}}}catch(d){s.e(d)}finally{s.f()}return t},isShowing:function(){return this.currentMixType===this.mixType.key},isSolo:function(){return this.isShowing&&this.currentSoloAudioType===this.audioType.key}},Object(u["b"])(["audioCtx","isPlaying","currentExampleIndex","currentMixType","currentSoloAudioType","startedTime","offsetTime"])),watch:{startedTime:function(){this.play()},offsetTime:function(){},isPlaying:function(){this.isPlaying||this.pause()},isSolo:function(){this.isSolo?this.unmute():this.mute()}},methods:{initAudio:function(){this.gainNode=this.audioCtx.createGain(),this.refreshAudioSource(),this.isSolo?this.unmute():this.mute()},refreshAudioSource:function(){var t=this;this.destroyAudioSource(),this.audioSource=this.audioCtx.createBufferSource(),this.audioSource.buffer=this.audioBuffer,this.audioSource.connect(this.gainNode).connect(this.audioCtx.destination),this.audioSource.onended=function(){t.refreshAudioSource(),t.$store.commit("ended")}},play:function(){this.isAudioSourceStarted&&this.refreshAudioSource(),this.audioSource.start(this.startedTime,this.offsetTime),this.isAudioSourceStarted=!0},pause:function(){this.refreshAudioSource()},mute:function(){this.gainNode.gain.setValueAtTime(0,this.audioCtx.currentTime)},unmute:function(){this.gainNode.gain.setValueAtTime(1,this.audioCtx.currentTime)},destroyAudioSource:function(){this.audioSource&&(this.isAudioSourceStarted&&(this.audioSource.onended=void 0,this.audioSource.stop()),this.audioSource.disconnect(),this.gainNode.disconnect()),this.isAudioSourceStarted=!1},solo:function(){this.$store.commit("changeSolo",{currentSoloAudioType:this.audioType.key})}},created:function(){},mounted:function(){this.initAudio()},destroyed:function(){this.destroyAudioSource()}},M=P,j=Object(w["a"])(M,l,d,!1,null,"70bb7cff",null),$=j.exports,I={name:"Panel",props:["mixType"],components:{TrackRow:$},computed:Object(s["a"])({isShowing:function(){return this.currentMixType===this.mixType.key},mix:function(){return this.$store.state.currentExample.mixes[this.mixType.key]}},Object(u["b"])(["audioTypes","currentExampleIndex","currentMixType"]))},L=I,O=Object(w["a"])(L,o,c,!1,null,"db4c0e6e",null),B=O.exports,R={name:"App",computed:Object(s["a"])({},Object(u["b"])(["isLoading","numLoadedItems","totalLoadingItems","isPlaying","audioCtx","startedTime","offsetTime","mixTypes","currentMixType","examples","currentExample"])),components:{Panel:B},methods:{changeMixType:function(t){this.$store.commit("changeMixType",{mixType:t.target.value})},playAll:function(){this.$store.commit("play")},pauseAll:function(){this.$store.commit("pause")},changeExample:function(t){var e=this;this.$store.dispatch("fetchAndChangeExample",{exampleIndex:t}).then((function(){console.log(e.offsetTime)}))},prevExample:function(){this.$store.dispatch("fetchAndSetPrevExample")},nextExample:function(){this.$store.dispatch("fetchAndSetNextExample")},handleShortcuts:function(t){var e=this,i={Space:function(){e.isPlaying?e.$store.commit("pause"):e.$store.commit("play")},Digit1:function(){e.$store.commit("changeSolo",{currentSoloAudioType:"prev"})},Digit2:function(){e.$store.commit("changeSolo",{currentSoloAudioType:"mix"})},Digit3:function(){e.$store.commit("changeSolo",{currentSoloAudioType:"next"})},KeyQ:function(){e.$store.commit("changeMixType",{mixType:"dj"})},KeyW:function(){e.$store.commit("changeMixType",{mixType:"base"})},KeyE:function(){e.$store.commit("changeMixType",{mixType:"xfade"})},KeyR:function(){e.$store.commit("changeMixType",{mixType:"eq3"})},ArrowRight:function(){var t=e.isPlaying?e.audioCtx.currentTime-e.startedTime:0,i=e.offsetTime+t+4;e.$store.commit("seek",{offsetTime:i})},ArrowLeft:function(){var t=e.isPlaying?e.audioCtx.currentTime-e.startedTime:0,i=e.offsetTime+t-4;e.$store.commit("seek",{offsetTime:i})},ArrowUp:function(){e.$store.dispatch("fetchAndSetPrevExample")},ArrowDown:function(){e.$store.dispatch("fetchAndSetNextExample")}};!(t.code in i)||this.isLoading||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||(i[t.code](),t.preventDefault())}},created:function(){this.$store.dispatch("init").then((function(){}))},mounted:function(){document.addEventListener("keydown",this.handleShortcuts)},destroyed:function(){document.removeEventListener("keydown",this.handleShortcuts)}},z=R,N=(i("5c0b"),Object(w["a"])(z,n,r,!1,null,null,null)),D=N.exports,K=(i("99af"),i("2b3d"),i("96cf"),i("1da1")),V="https://d3ta5tpotdqa0v.cloudfront.net/";a["a"].use(u["a"]);var q=new u["a"].Store({state:{audioCtx:new AudioContext,startedTime:0,offsetTime:0,duration:0,isLoading:!0,isPlaying:!1,numLoadedItems:0,totalLoadingItems:0,currentExample:{},currentExampleIndex:void 0,currentMixType:"eq3",currentSoloAudioType:"mix",examples:[],mixTypes:[{key:"dj",name:"DJ Mix"},{key:"base",name:"Baseline"},{key:"xfade",name:"Crossfader"},{key:"eq3",name:"EQ3"}],audioTypes:[{key:"prev",name:"Previous Track"},{key:"mix",name:"Mix"},{key:"next",name:"Next Track"}]},mutations:{init:function(t,e){t.examples=e,t.currentExampleIndex=Math.floor(Math.random()*t.examples.length),t.currentExample=t.examples[t.currentExampleIndex]},seek:function(t,e){var i=e.offsetTime;i=Math.max(0,i),i=Math.min(t.duration,i),t.offsetTime=i,t.isPlaying&&(t.startedTime=t.audioCtx.currentTime)},play:function(t){"suspended"===t.audioCtx.state?t.audioCtx.resume().then((function(){t.isPlaying||(t.startedTime=t.audioCtx.currentTime),t.isPlaying=!0})):(t.isPlaying||(t.startedTime=t.audioCtx.currentTime),t.isPlaying=!0)},pause:function(t){if(t.isPlaying){var e=t.offsetTime,i=t.audioCtx.currentTime-t.startedTime;t.offsetTime=e+i}t.isPlaying=!1},ended:function(t){t.isPlaying=!1,t.offsetTime=0},changeSolo:function(t,e){var i=e.currentSoloAudioType;t.currentSoloAudioType=i},changeMixType:function(t,e){var i=e.mixType;t.currentMixType=i}},actions:{init:function(t){return Object(K["a"])(regeneratorRuntime.mark((function e(){var i,a,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.state,a=t.commit,n=t.dispatch,e.next=3,fetch(V+"meta.json",{mode:"cors",cache:"force-cache"});case 3:return r=e.sent,e.next=6,r.json();case 6:return s=e.sent,a("init",s),e.abrupt("return",n("fetchAndChangeExample",{exampleIndex:i.currentExampleIndex}));case 9:case"end":return e.stop()}}),e)})))()},fetchAndChangeExample:function(t,e){var i=t.state,a=t.dispatch,n=e.exampleIndex;i.isPlaying=!1,i.isLoading=!0;var r,s=i.examples[n];if(i.currentExample=s,i.currentExampleIndex=n,s.isLoaded)r=Promise.resolve(s);else{var o=[];s.mixes={};var c,u=Object(m["a"])(i.mixTypes);try{for(u.s();!(c=u.n()).done;){var l=c.value,d=s.mixes[l.key]={};d.audios={};var h,p=Object(m["a"])(i.audioTypes);try{var f=function(){var t=h.value,e=d.audios[t.key]={},r="audio/".concat(n,"-").concat(t.key,"-").concat(l.key,".mp3"),s=a("fetchAudio",{path:r}).then((function(t){return e.audioBuffer=t})).then((function(){return i.numLoadedItems++}));i.totalLoadingItems++;var c="spec/".concat(n,"-").concat(t.key,"-").concat(l.key,".png"),u=a("fetchSpec",{path:c}).then((function(t){return e.specImageUrl=t})).then((function(){return i.numLoadedItems++}));if(i.totalLoadingItems++,"dj"!==l.key){var m="curve/".concat(n,"-").concat(l.key,".json"),p=a("fetchCurves",{path:m}).then((function(t){return e.curves=t})).then((function(){return i.numLoadedItems++}));i.totalLoadingItems++,o.push(p)}o.push(s,u)};for(p.s();!(h=p.n()).done;)f()}catch(v){p.e(v)}finally{p.f()}}}catch(v){u.e(v)}finally{u.f()}r=Promise.all(o)}return r.then((function(){return s.isLoaded=!0,i.offsetTime=0,i.duration=i.currentExample.mixes["dj"].audios["mix"].audioBuffer.duration,i.isLoading=!1,s}))},fetchAndSetPrevExample:function(t){return Object(K["a"])(regeneratorRuntime.mark((function e(){var i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.state,a=t.dispatch,n=Math.max(0,i.currentExampleIndex-1),n===i.currentExampleIndex){e.next=5;break}return e.next=5,a("fetchAndChangeExample",{exampleIndex:n});case 5:case"end":return e.stop()}}),e)})))()},fetchAndSetNextExample:function(t){return Object(K["a"])(regeneratorRuntime.mark((function e(){var i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.state,a=t.dispatch,n=Math.min(i.examples.length-1,i.currentExampleIndex+1),n===i.currentExampleIndex){e.next=5;break}return e.next=5,a("fetchAndChangeExample",{exampleIndex:n});case 5:case"end":return e.stop()}}),e)})))()},fetchAudio:function(t,e){return Object(K["a"])(regeneratorRuntime.mark((function i(){var a,n,r,s,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t.state,n=e.path,i.next=4,fetch(V+n,{mode:"cors",cache:"force-cache"});case 4:return r=i.sent,i.next=7,r.arrayBuffer();case 7:return s=i.sent,i.next=10,a.audioCtx.decodeAudioData(s);case 10:return o=i.sent,i.abrupt("return",o);case 12:case"end":return i.stop()}}),i)})))()},fetchSpec:function(t,e){return Object(K["a"])(regeneratorRuntime.mark((function t(){var i,a,n,r,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.path,t.next=3,fetch(V+i,{mode:"cors",cache:"force-cache"});case 3:return a=t.sent,t.next=6,a.arrayBuffer();case 6:return n=t.sent,r=new Blob([n],{type:"image/png"}),s=window.URL||window.webkitURL,o=s.createObjectURL(r),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))()},fetchCurves:function(t,e){return Object(K["a"])(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.path,t.next=3,fetch(V+i,{mode:"cors",cache:"force-cache"});case 3:return a=t.sent,t.next=6,a.json();case 6:return n=t.sent,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))()}},modules:{}});a["a"].config.productionTip=!1,new a["a"]({store:q,render:function(t){return t(D)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";i("9c0c")},"5c1b":function(t,e,i){"use strict";i("f029")},"9c0c":function(t,e,i){},f029:function(t,e,i){}});
//# sourceMappingURL=app.d804ac67.js.map